# 機能詳細

## Cosenseデータの読み込み

- Cosense記法の自動パースによるタスク情報の抽出
- CosenseバックアップエンドポイントとのリアルタイムAPI連携
- ドラッグ&ドロップまたはファイル選択によるJSONファイルの読み込みにも対応

## リアルタイムタスク編集

- インターフェースでのステータス、ステージ、担当者の直接編集
  - ステータスは色で表示
- 変更されたタスクの視覚的フィードバック
- **同時編集時の競合自動解決**: Cosense側の追加情報を保持しつつTaskflow変更を優先
- **2段階同期システム**: バックアップ優先 + 個別ページ取得のハイブリッド方式
- 自動バックアップ＆キャッシュシステム

## エクスポート＆インポート

- 変更されたタスクのCosense互換JSONエクスポート
- プロジェクト名プレースホルダーをサポートする柔軟なファイル名形式
- エクスポート前の自動データ取得（オプション）
- Cosenseインポートインターフェースとの直接連携
- **エクスポート後の変更確定**: 変更がキャッシュに自動保存され、ページリロード後も保持
- **巻き戻り防止**: バックアップ後に作成されたページも正しくエクスポートに含まれる

## フィルタリング＆ソート

- プロジェクト、ステータス、ステージ、担当者でフィルタリング可能
- スマートソート（期限日 → 重要度・緊急度 → ステータス）
  - **レベル1: 期限日順**（期限日なし = 最低優先度）
  - **レベル2: 重要度・緊急度**（#Importance_high, #Urgency_high, [Importance_high], [Urgency_high]）
  - **レベル3: ステータス順**（inProgress → waiting → review → notStarted → completed）
  - **レベル4: フォールバック**（更新日、新しい順）
- 完了済み・非アクティブタスクの表示/非表示
- 「プロジェクトなし」オプションを含むプロジェクト別フィルタリング

## インターフェース

- 重要度・緊急度の高いタスクのハイライト表示
- **3段階レスポンシブデザイン**
  - **小画面 (<512px)**: 超コンパクトカード形式
  - **中画面 (512px-1024px)**: 開始日・期限日付きカード形式
  - **デスクトップ (1025px+)**: 横並びリスト形式

## Cosense連携

- CosenseバックアップAPIからのリアルタイムデータ取得
- レート制限を回避するインテリジェントキャッシュシステム
- 新しいバックアップの自動検出
- **効率的な2段階同期**: 新バックアップがない場合は変更されたページのみ個別取得
- **データ整合性の保証**: エクスポート時に巻き戻りが発生しない設計
- 設定可能な認証とプロジェクト設定